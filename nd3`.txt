TÃ´i tháº¥y cÃ³ nhÆ° sapo hay pháº§n má»m khÃ¡ch khi táº¡o cho 1 thÆ°Æ¡ng hiá»‡u nÃ³ sáº½ ra 1 tÃªn miá»n con vÃ  khi Ä‘Äƒng nháº­p mÃ¬nh cÃ³ thá»ƒ quáº£n lÃ½ Ä‘Æ°á»£c nhiá»u chi nhanh trong Ä‘Ã³. vid dá»¥ storelypos.com thÆ°Æ¡ng hiá»‡u A,B thÃ¬ cÃ³ tÃªn miá»n lÃ  a.storelypos.com, b.storelypos.com lÃ m nhÆ° tháº¿ nÃ o

CÃ¢u há»i nÃ y ráº¥t hay vÃ  ráº¥t â€œÄ‘Ãºng level SaaSâ€ ğŸ‘
Sapo / KiotViet / Haravan Ä‘á»u lÃ m y há»‡t nhÆ° váº­y.

MÃ¬nh sáº½ giáº£i thÃ­ch tá»« Ã½ tÆ°á»Ÿng â†’ kiáº¿n trÃºc â†’ cÃ¡ch lÃ m cá»¥ thá»ƒ vá»›i Vercel + React + Supabase, khÃ´ng nÃ³i mÆ¡ há»“.

ğŸ¯ Má»¤C TIÃŠU Cá»¦A MÃ” HÃŒNH NÃ€Y

VÃ­ dá»¥:

Domain gá»‘c:

storelypos.com


Má»—i thÆ°Æ¡ng hiá»‡u (brand/tenant) cÃ³ subdomain riÃªng:

a.storelypos.com   â†’ Brand A
b.storelypos.com   â†’ Brand B


Sau khi Ä‘Äƒng nháº­p:

User chá»‰ tháº¥y dá»¯ liá»‡u brand Ä‘Ã³

Trong brand cÃ³ nhiá»u chi nhÃ¡nh â†’ chá»n trong app

ğŸ‘‰ ÄÃ¢y gá»i lÃ  Subdomain-based Multi-Tenant SaaS

ğŸ§  TÆ¯ DUY KIáº¾N TRÃšC (Ráº¤T QUAN TRá»ŒNG)
1ï¸âƒ£ Subdomain = BRAND (Tenant)

a.storelypos.com â†’ brand = a

b.storelypos.com â†’ brand = b

2ï¸âƒ£ BÃªn trong brand

Quáº£n lÃ½ nhiá»u chi nhÃ¡nh

Branch KHÃ”NG cáº§n subdomain riÃªng

Branch chá»‰ lÃ  context trong app

ğŸ‘‰ Subdomain = cÃ´ng ty
ğŸ‘‰ Branch = cá»­a hÃ ng

ğŸ§± KIáº¾N TRÃšC Tá»”NG THá»‚
Browser
  â””â”€â”€ a.storelypos.com
        â†“
Vercel (Wildcard Domain)
        â†“
React App (Ä‘á»c subdomain)
        â†“
Supabase Auth + RLS
        â†“
PostgreSQL (brand_id, branch_id)

ğŸš€ CÃCH LÃ€M Cá»¤ THá»‚ (THEO ÄÃšNG STACK Cá»¦A Báº N)
PHáº¦N 1ï¸âƒ£ â€“ Cáº¤U HÃŒNH DOMAIN TRÃŠN VERCEL
1.1 ThÃªm domain wildcard

Trong Vercel â†’ Project â†’ Domains:

ThÃªm:

storelypos.com
*.storelypos.com


ğŸ‘‰ Vercel tá»± hiá»ƒu wildcard

1.2 DNS (vÃ­ dá»¥ Cloudflare)

ThÃªm record:

Type: CNAME
Name: *
Target: cname.vercel-dns.com


ğŸ‘‰ Xong DNS lÃ :

a.storelypos.com

b.storelypos.com

c.storelypos.com
Ä‘á»u trá» vá» cÃ¹ng 1 app React

PHáº¦N 2ï¸âƒ£ â€“ NHáº¬N DIá»†N BRAND Tá»ª SUBDOMAIN (FRONTEND)
2.1 Láº¥y subdomain trong React
export function getBrandSlug() {
  const host = window.location.hostname; 
  // a.storelypos.com
  const parts = host.split(".");

  if (parts.length < 3) return null; 
  // storelypos.com â†’ null

  return parts[0]; 
  // a
}

2.2 Map subdomain â†’ brand_id

Báº£ng brands nÃªn cÃ³:

brands
- id
- name
- slug   -- 'a', 'b'


Query:

const slug = getBrandSlug();

const { data: brand } = await supabase
  .from("brands")
  .select("id")
  .eq("slug", slug)
  .single();


ğŸ‘‰ Tá»« Ä‘Ã¢y báº¡n cÃ³ brand_id

PHáº¦N 3ï¸âƒ£ â€“ AUTH + BRAND (ÄÃšNG CÃCH, KHÃ”NG Lá»˜ Dá»® LIá»†U)
âŒ KHÃ”NG LÃ€M

KhÃ´ng cho frontend truyá»n brand_id khi login

KhÃ´ng tin query param

âœ… CÃCH ÄÃšNG
3.1 Khi user Ä‘Äƒng nháº­p

User Ä‘Äƒng nháº­p bÃ¬nh thÆ°á»ng (email/password)

Sau login:

Backend kiá»ƒm tra user thuá»™c brand nÃ o

So sÃ¡nh vá»›i subdomain hiá»‡n táº¡i

VÃ­ dá»¥ logic:

if (user.brand_id !== brand_id_from_subdomain) {
  throw new Error("Sai thÆ°Æ¡ng hiá»‡u");
}

3.2 JWT chá»©a brand_id (QUAN TRá»ŒNG)

Trong Supabase:

LÆ°u brand_id, branch_id, role vÃ o user_metadata

JWT payload:

{
  "brand_id": "uuid",
  "branch_id": "uuid",
  "role": "owner"
}


ğŸ‘‰ Sau Ä‘Ã³ RLS dÃ¹ng JWT, khÃ´ng cáº§n subdomain ná»¯a

ğŸ” PHáº¦N 4ï¸âƒ£ â€“ RLS CÃCH LY BRAND (CHÃŒA KHÃ“A)

VÃ­ dá»¥ policy:

USING (
  brand_id = current_setting('request.jwt.claim.brand_id')::uuid
)


ğŸ‘‰ DÃ¹ user cá»‘ truy cáº­p:

b.storelypos.com

gá»i API cá»§a brand A

â¡ï¸ DB váº«n cháº·n

ğŸ§© PHáº¦N 5ï¸âƒ£ â€“ FLOW ÄÃšNG GIá»NG SAPO
Táº¡o brand má»›i

User Ä‘Äƒng kÃ½ táº¡i:

storelypos.com/signup


Nháº­p:

TÃªn thÆ°Æ¡ng hiá»‡u

TÃªn subdomain (slug)

System:

Táº¡o brand

Táº¡o subdomain

Redirect:

https://a.storelypos.com/login

ÄÄƒng nháº­p

User vÃ o:

a.storelypos.com


Login

Quáº£n lÃ½ nhiá»u chi nhÃ¡nh trong brand A

ğŸ§  Táº I SAO SAPO / KIOTVIET LÃ€M KIá»‚U NÃ€Y?
LÃ½ do	Giáº£i thÃ­ch
UX	KhÃ¡ch cáº£m giÃ¡c â€œpháº§n má»m riÃªngâ€
Báº£o máº­t	KhÃ´ng láº«n brand
Branding	Dá»… bÃ¡n, dá»… nhá»›
Scale	1 codebase, 1000 brand
SaaS	Chuáº©n SaaS toÃ n cáº§u
âœ… CHECKLIST TRIá»‚N KHAI CHO STORELY POS

 Wildcard domain trÃªn Vercel

 DNS *

 Brand slug trong DB

 Láº¥y subdomain á»Ÿ frontend

 Match brand sau login

 JWT chá»©a brand_id

 RLS cÃ¡ch ly brand

ğŸ‘‰ LÃ m Ä‘Ãºng checklist nÃ y = khÃ´ng bao giá» vá»¡ dá»¯ liá»‡u

ğŸ”¥ BÆ¯á»šC TIáº¾P THEO (MÃŒNH CÃ“ THá»‚ LÃ€M NGAY)

Náº¿u báº¡n muá»‘n, mÃ¬nh sáº½:

1ï¸âƒ£ Viáº¿t middleware / guard React cho subdomain-based brand
2ï¸âƒ£ Viáº¿t flow táº¡o brand + subdomain (signup â†’ redirect)
3ï¸âƒ£ Xá»­ lÃ½ custom domain cho khÃ¡ch (abc.com trá» vÃ o Storely POS)

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh lÃ m tiáº¿p chi tiáº¿t tá»«ng bÆ°á»›c ğŸš€

cáº£ 3

Ráº¥t tá»‘t ğŸ‘
Váº­y mÃ¬nh sáº½ lÃ m TRá»ŒN Bá»˜ Cáº¢ 3 PHáº¦N, Ä‘Ãºng chuáº©n SaaS Ä‘a thÆ°Æ¡ng hiá»‡u giá»‘ng Sapo / KiotViet, bÃ¡m React + TypeScript + Supabase + Vercel, vÃ  khÃ´ng lÃ m sai kiáº¿n trÃºc Ä‘Ã£ xÃ¢y trÆ°á»›c Ä‘Ã³.

MÃ¬nh chia thÃ nh 3 khá»‘i rÃµ rÃ ng, anh Ä‘á»c lÃ  triá»ƒn khai Ä‘Æ°á»£c ngay.

ğŸ§  Tá»”NG QUAN KIáº¾N TRÃšC CUá»I CÃ™NG
storelypos.com              â†’ Landing / Signup
a.storelypos.com            â†’ Brand A
b.storelypos.com            â†’ Brand B
customdomainkhach.com       â†’ Brand C (nÃ¢ng cao)

Má»—i subdomain = 1 BRAND
Trong brand â†’ nhiá»u CHI NHÃNH


ğŸ‘‰ Subdomain = cÃ´ng ty / thÆ°Æ¡ng hiá»‡u
ğŸ‘‰ Branch = cá»­a hÃ ng

PHáº¦N 1ï¸âƒ£ â€“ MIDDLEWARE / GUARD REACT THEO SUBDOMAIN
ğŸ¯ Má»¥c tiÃªu

App luÃ´n biáº¿t Ä‘ang á»Ÿ brand nÃ o

KhÃ´ng cho user vÃ o sai brand

KhÃ´ng cáº§n backend riÃªng

1.1 Láº¥y brand slug tá»« domain
// src/utils/brand.ts
export function getBrandSlug() {
  const host = window.location.hostname;
  const parts = host.split(".");

  // storelypos.com â†’ null
  if (parts.length < 3) return null;

  // a.storelypos.com â†’ "a"
  return parts[0];
}

1.2 Guard kiá»ƒm tra brand khi load app
// src/guards/BrandGuard.tsx
import { useEffect, useState } from "react";
import { supabase } from "@/lib/supabase";
import { getBrandSlug } from "@/utils/brand";

export function BrandGuard({ children }: { children: React.ReactNode }) {
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    async function checkBrand() {
      const slug = getBrandSlug();

      // Landing page (storelypos.com)
      if (!slug) {
        setLoading(false);
        return;
      }

      const { data: brand } = await supabase
        .from("brands")
        .select("id")
        .eq("slug", slug)
        .single();

      if (!brand) {
        window.location.href = "/404";
        return;
      }

      setLoading(false);
    }

    checkBrand();
  }, []);

  if (loading) return <div>Äang táº£i...</div>;

  return <>{children}</>;
}


ğŸ‘‰ Gáº¯n BrandGuard á»Ÿ App root
ğŸ‘‰ Sai subdomain = khÃ´ng vÃ o Ä‘Æ°á»£c app

1.3 Match brand sau login (CHá»T Báº¢O Máº¬T)
const slug = getBrandSlug();

if (user.brand_slug !== slug) {
  await supabase.auth.signOut();
  alert("Báº¡n Ä‘Äƒng nháº­p sai thÆ°Æ¡ng hiá»‡u");
}


ğŸ“Œ RLS váº«n lÃ  lá»›p báº£o vá»‡ cuá»‘i cÃ¹ng

PHáº¦N 2ï¸âƒ£ â€“ FLOW Táº O BRAND + SUBDOMAIN (SIGNUP â†’ REDIRECT)
ğŸ¯ Má»¥c tiÃªu

UX giá»‘ng Sapo

KhÃ¡ch cáº£m giÃ¡c â€œpháº§n má»m riÃªngâ€

KhÃ´ng cáº¥u hÃ¬nh tay

2.1 Form Ä‘Äƒng kÃ½ táº¡i storelypos.com/signup

Form gá»“m:

TÃªn thÆ°Æ¡ng hiá»‡u

Subdomain mong muá»‘n (slug)

Email + máº­t kháº©u

2.2 Logic táº¡o brand (Edge Function)
// supabase/functions/create-brand/index.ts
import { serve } from ê³ ë ¤;
import { createClient } from "@supabase/supabase-js";

serve(async (req) => {
  const supabase = createClient(
    Deno.env.get("SUPABASE_URL"),
    Deno.env.get("SUPABASE_SERVICE_ROLE_KEY")
  );

  const { brand_name, slug, user_id } = await req.json();

  const { data: brand } = await supabase
    .from("brands")
    .insert({ name: brand_name, slug })
    .select()
    .single();

  // táº¡o branch Ä‘áº§u tiÃªn
  const { data: branch } = await supabase
    .from("branches")
    .insert({
      brand_id: brand.id,
      name: "Chi nhÃ¡nh chÃ­nh",
    })
    .select()
    .single();

  // gÃ¡n user lÃ m owner
  await supabase.from("user_profiles").insert({
    id: user_id,
    brand_id: brand.id,
    branch_id: branch.id,
    role: "owner",
  });

  return new Response(JSON.stringify({ slug }));
});

2.3 Redirect sau signup
window.location.href = `https://${slug}.storelypos.com/login`;


ğŸ‘‰ Y há»‡t Sapo / KiotViet

PHáº¦N 3ï¸âƒ£ â€“ CUSTOM DOMAIN CHO KHÃCH (abc.com)

ÄÃ¢y lÃ  tÃ­nh nÄƒng PRO, lÃ m sau cÅ©ng Ä‘Æ°á»£c, nhÆ°ng kiáº¿n trÃºc nÃªn chuáº©n tá»« Ä‘áº§u.

3.1 DB lÆ°u domain riÃªng
create table brand_domains (
  id uuid primary key default gen_random_uuid(),
  brand_id uuid references brands(id),
  domain text,
  verified boolean default false
);

3.2 KhÃ¡ch cáº¥u hÃ¬nh DNS

VÃ­ dá»¥ khÃ¡ch cÃ³ domain abc.com:

Type: CNAME
Name: abc.com
Value: cname.vercel-dns.com

3.3 Vercel há»— trá»£ custom domain

ThÃªm domain vÃ o project

Gáº¯n domain Ä‘Ã³ vá»›i brand_id

3.4 Resolve brand tá»« domain
const host = window.location.hostname;

const { data: domain } = await supabase
  .from("brand_domains")
  .select("brand_id")
  .eq("domain", host)
  .single();

const brandId = domain.brand_id;


ğŸ‘‰ Náº¿u cÃ³ domain riÃªng â†’ Æ°u tiÃªn domain trÆ°á»›c subdomain

ğŸ” Tá»”NG Há»¢P Báº¢O Máº¬T (Ráº¤T QUAN TRá»ŒNG)
Lá»›p	Vai trÃ²
Subdomain	UX + Ä‘á»‹nh danh brand
BrandGuard	Cháº·n sai brand
JWT	Mang brand_id
RLS	Cháº·n tuyá»‡t Ä‘á»‘i DB

ğŸ‘‰ DÃ¹ hack frontend cÅ©ng khÃ´ng lá»™ dá»¯ liá»‡u

âœ… CHECKLIST TRIá»‚N KHAI

 Wildcard domain *.storelypos.com

 Brand slug trong DB

 React BrandGuard

 Signup â†’ táº¡o brand â†’ redirect

 JWT chá»©a brand_id

 RLS cÃ¡ch ly brand

 (Optional) Custom domain

ğŸ¯ Káº¾T LUáº¬N

Anh Ä‘ang xÃ¢y SaaS POS Ä‘Ãºng chuáº©n quá»‘c táº¿, khÃ´ng pháº£i app nhá»:

UX giá»‘ng Sapo

Báº£o máº­t nhÆ° KiotViet

Kiáº¿n trÃºc scale 1 â†’ 1000 brand

1 codebase â€“ 1 database

ğŸ‘‰ ÄÃ¢y lÃ  hÆ°á»›ng ÄÃšNG vÃ  Bá»€N.

ğŸš€ BÆ¯á»šC TIáº¾P THEO (ANH CHá»ŒN)

MÃ¬nh cÃ³ thá»ƒ Ä‘i tiáº¿p:

1ï¸âƒ£ Tá»‘i Æ°u auth + JWT claims cho multi-domain
2ï¸âƒ£ Flow migrate brand tá»« subdomain â†’ custom domain
3ï¸âƒ£ White-label (logo, mÃ u riÃªng tá»«ng brand)

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh lÃ m tiáº¿p chi tiáº¿t ğŸ‘

cáº£ 3

Ráº¥t tá»‘t ğŸ‘
Váº­y mÃ¬nh sáº½ lÃ m TRá»ŒN Bá»˜ Cáº¢ 3 PHáº¦N NÃ‚NG CAO CUá»I cho mÃ´ hÃ¬nh subdomain-based SaaS giá»‘ng Sapo/KiotViet, theo Ä‘Ãºng stack React + TypeScript + Supabase + Vercel, vÃ  khÃ´ng phÃ¡ kiáº¿n trÃºc anh Ä‘ang cÃ³.

MÃ¬nh sáº½ viáº¿t theo logic triá»ƒn khai thá»±c táº¿, khÃ´ng pháº£i lÃ½ thuyáº¿t.

ğŸ§  Tá»”NG QUAN Cáº¢ 3 PHáº¦N
Pháº§n	Má»¥c tiÃªu
1ï¸âƒ£ Auth + JWT multi-domain	ÄÄƒng nháº­p Ä‘Ãºng thÆ°Æ¡ng hiá»‡u, khÃ´ng lá»™ dá»¯ liá»‡u
2ï¸âƒ£ Migrate subdomain â†’ custom domain	KhÃ¡ch nÃ¢ng cáº¥p khÃ´ng máº¥t dá»¯ liá»‡u
3ï¸âƒ£ White-label theo brand	Má»—i thÆ°Æ¡ng hiá»‡u cÃ³ logo, mÃ u riÃªng
1ï¸âƒ£ Tá»I Æ¯U AUTH + JWT CLAIMS CHO MULTI-DOMAIN
ğŸ¯ Váº¥n Ä‘á» cáº§n giáº£i quyáº¿t

User Ä‘Äƒng nháº­p á»Ÿ a.storelypos.com

NhÆ°ng cá»‘ má»Ÿ b.storelypos.com

Hoáº·c custom domain abc.com

ğŸ‘‰ Pháº£i cháº·n tá»« sá»›m + cháº·n á»Ÿ DB

1.1 JWT CHÃNH LÃ€ NGUá»’N Sá»° THáº¬T

JWT cá»§a Supabase PHáº¢I chá»©a:

{
  "brand_id": "uuid",
  "branch_id": "uuid",
  "role": "owner"
}


ğŸ‘‰ Subdomain / domain chá»‰ Ä‘á»ƒ Ä‘á»‹nh danh UX,
ğŸ‘‰ RLS má»›i lÃ  lá»›p báº£o máº­t cuá»‘i cÃ¹ng.

1.2 Guard Ä‘Äƒng nháº­p theo domain (React)
async function assertCorrectBrand() {
  const host = window.location.hostname;

  const { data: session } = await supabase.auth.getSession();
  if (!session?.user) return;

  const userBrandId = session.user.user_metadata.brand_id;

  // resolve brand tá»« domain
  const { data: brand } = await supabase
    .from("brands")
    .select("id")
    .eq("slug", host.split(".")[0])
    .single();

  if (!brand || brand.id !== userBrandId) {
    await supabase.auth.signOut();
    alert("Báº¡n Ä‘Äƒng nháº­p sai thÆ°Æ¡ng hiá»‡u");
  }
}


ğŸ“Œ Gá»i hÃ m nÃ y sau login & khi load app

1.3 RLS (CHá»T Háº  CUá»I)
USING (
  brand_id = current_setting('request.jwt.claim.brand_id')::uuid
)


ğŸ‘‰ DÃ¹ user fake domain â†’ DB váº«n cháº·n

2ï¸âƒ£ MIGRATE BRAND Tá»ª SUBDOMAIN â†’ CUSTOM DOMAIN

VÃ­ dá»¥:

a.storelypos.com  â†’  abc.com


ğŸ¯ KHÃ”NG Ä‘á»•i brand_id, KHÃ”NG Ä‘á»•i user, KHÃ”NG downtime

2.1 Báº¢NG DOMAIN RIÃŠNG
create table brand_domains (
  id uuid primary key default gen_random_uuid(),
  brand_id uuid references brands(id),
  domain text unique,
  verified boolean default false,
  created_at timestamp default now()
);

2.2 FLOW MIGRATE (CHUáº¨N)
Owner báº­t "DÃ¹ng domain riÃªng"
   â†“
Nháº­p abc.com
   â†“
System yÃªu cáº§u cáº¥u hÃ¬nh DNS
   â†“
Verify domain
   â†“
ÄÃ¡nh dáº¥u verified = true

2.3 Resolve brand theo domain (Æ¯U TIÃŠN)
const host = window.location.hostname;

// 1. Check custom domain
const { data: domain } = await supabase
  .from("brand_domains")
  .select("brand_id")
  .eq("domain", host)
  .eq("verified", true)
  .single();

if (domain) return domain.brand_id;

// 2. Fallback subdomain
return getBrandFromSubdomain(host);


ğŸ‘‰ CÃ¹ng 1 brand_id â†’ khÃ´ng máº¥t dá»¯ liá»‡u

2.4 UX Ráº¤T QUAN TRá»ŒNG

Subdomain cÅ© váº«n cháº¡y

Custom domain cháº¡y song song

KhÃ´ng redirect Ã©p

ğŸ“Œ KhÃ¡ch yÃªn tÃ¢m, khÃ´ng sá»£ máº¥t dá»¯ liá»‡u.

3ï¸âƒ£ WHITE-LABEL THEO BRAND (LOGO, MÃ€U, IN BILL)

ÄÃ¢y lÃ  tÃ­nh nÄƒng bÃ¡n Ä‘Æ°á»£c tiá»n, cá»±c ká»³ quan trá»ng.

3.1 BRAND SETTINGS
create table brand_settings (
  brand_id uuid primary key,
  logo_url text,
  primary_color text,
  secondary_color text,
  receipt_logo_url text
);

3.2 Load theme theo brand (React)
const { data: settings } = await supabase
  .from("brand_settings")
  .select("*")
  .eq("brand_id", brandId)
  .single();

document.documentElement.style.setProperty(
  "--primary-color",
  settings.primary_color
);


ğŸ‘‰ POS, Dashboard Ä‘á»•i mÃ u ngay.

3.3 Logo theo brand

Header

Login page

In bill

<img src={settings.logo_url} />

3.4 IN BILL WHITE-LABEL
escpos
  .image(settings.receipt_logo_url)
  .text(settings.brand_name)
  .text(`Chi nhÃ¡nh ${branch.name}`)


ğŸ‘‰ Má»—i chi nhÃ¡nh cáº£m giÃ¡c pháº§n má»m riÃªng

ğŸ” Tá»”NG Há»¢P KIáº¾N TRÃšC SAU CÃ™NG
Domain / Subdomain
        â†“
BrandGuard (React)
        â†“
JWT (brand_id)
        â†“
RLS (Postgres)


âœ” KhÃ´ng lá»™ dá»¯ liá»‡u
âœ” KhÃ´ng nháº§m thÆ°Æ¡ng hiá»‡u
âœ” Scale ráº¥t khá»e

âœ… CHECKLIST CUá»I

 JWT chá»©a brand_id

 Guard domain + auth

 RLS cÃ¡ch ly tuyá»‡t Ä‘á»‘i

 Domain riÃªng khÃ´ng máº¥t data

 White-label toÃ n bá»™ UI + bill

ğŸ¯ Káº¾T LUáº¬N THáº²NG THáº®N

Anh Ä‘ang xÃ¢y SaaS POS chuáº©n quá»‘c táº¿, khÃ´ng thua Sapo/KiotViet vá» kiáº¿n trÃºc:

1 codebase

1 database

1000 thÆ°Æ¡ng hiá»‡u

UX ráº¥t â€œpháº§n má»m riÃªngâ€

ğŸ‘‰ ÄÃ¢y lÃ  hÆ°á»›ng ÄÃšNG & Bá»€N.

ğŸš€ BÆ¯á»šC TIáº¾P THEO (ANH CHá»ŒN)

MÃ¬nh cÃ³ thá»ƒ lÃ m tiáº¿p:

1ï¸âƒ£ Chi tiáº¿t code verify DNS custom domain (TXT/CNAME)
2ï¸âƒ£ Flow billing theo brand (Free/Pro)
3ï¸âƒ£ Multi-environment (dev/staging/prod)

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh triá»ƒn khai tiáº¿p cho anh ğŸ‘

cáº£ 3

Ráº¥t tá»‘t ğŸ‘
Váº­y mÃ¬nh sáº½ lÃ m trá»n bá»™ Cáº¢ 3 PHáº¦N CUá»I CÃ™NG Ä‘á»ƒ Storely POS Ä‘áº¡t level SaaS hoÃ n chá»‰nh nhÆ° Sapo/KiotViet, nhÆ°ng Ä‘Ãºng vá»›i stack React + TypeScript + Supabase + Vercel vÃ  triá»ƒn khai Ä‘Æ°á»£c ngay, khÃ´ng lÃ½ thuyáº¿t.

MÃ¬nh sáº½ trÃ¬nh bÃ y theo thá»© tá»± logic triá»ƒn khai ngoÃ i Ä‘á»i, Ä‘á»ƒ anh lÃ m tá»›i Ä‘Ã¢u cháº¯c tá»›i Ä‘Ã³.

ğŸ§  Tá»”NG QUAN 3 PHáº¦N ANH ÄÃƒ CHá»ŒN
#	Pháº§n	Má»¥c tiÃªu
1ï¸âƒ£	Verify DNS custom domain	KhÃ¡ch dÃ¹ng domain riÃªng
2ï¸âƒ£	Billing theo brand (Free/Pro)	Kiáº¿m tiá»n tháº­t
3ï¸âƒ£	Multi-environment (dev/staging/prod)	KhÃ´ng vá»¡ khi nÃ¢ng cáº¥p
1ï¸âƒ£ VERIFY DNS CUSTOM DOMAIN (TXT / CNAME)
ğŸ¯ BÃ i toÃ¡n thá»±c táº¿

KhÃ¡ch muá»‘n:

abc.com  â†’  POS cá»§a Storely


NhÆ°ng:

KhÃ´ng Ä‘Æ°á»£c cho ai trá» bá»«a domain

Pháº£i chá»©ng minh há» sá»Ÿ há»¯u domain Ä‘Ã³

ğŸ‘‰ DNS verification lÃ  báº¯t buá»™c

1.1 Báº£ng lÆ°u domain
create table brand_domains (
  id uuid primary key default gen_random_uuid(),
  brand_id uuid not null,
  domain text not null unique,
  verification_token text not null,
  verified boolean default false,
  created_at timestamp default now()
);

1.2 Flow xÃ¡c minh (CHUáº¨N SAAS)
Owner nháº­p domain
   â†“
System sinh verification_token
   â†“
YÃªu cáº§u khÃ¡ch thÃªm DNS
   â†“
Check DNS
   â†“
verified = true

1.3 DNS khÃ¡ch pháº£i thÃªm
CÃ¡ch 1 â€“ TXT (khuyÃªn dÃ¹ng)
Type: TXT
Name: _storely-verify.abc.com
Value: storely-verify-abc123

CÃ¡ch 2 â€“ CNAME
Type: CNAME
Name: abc.com
Value: cname.vercel-dns.com

1.4 Edge Function verify DNS
import dns from "node:dns/promises";

const records = await dns.resolveTxt(`_storely-verify.${domain}`);
if (records.flat().includes(token)) {
  markVerified();
}


ğŸ“Œ Quan trá»ng

KhÃ´ng verify â†’ khÃ´ng cho dÃ¹ng domain

Domain chÆ°a verify â†’ váº«n dÃ¹ng subdomain

1.5 Resolve brand theo domain
const host = window.location.hostname;

const domain = await supabase
  .from("brand_domains")
  .select("brand_id")
  .eq("domain", host)
  .eq("verified", true)
  .single();

if (domain) return domain.brand_id;


ğŸ‘‰ Æ¯u tiÃªn custom domain hÆ¡n subdomain

2ï¸âƒ£ BILLING THEO BRAND (FREE / PRO / ADD-ON)
ğŸ¯ Náº¿u khÃ´ng cÃ³ billing â†’ khÃ´ng pháº£i SaaS
2.1 Báº£ng billing
create table subscriptions (
  brand_id uuid primary key,
  plan text check (plan in ('free','pro')),
  started_at timestamp,
  expires_at timestamp
);

2.2 Quyá»n theo plan (Ráº¤T THá»°C Táº¾)
TÃ­nh nÄƒng	Free	Pro
Sá»‘ chi nhÃ¡nh	1	âˆ
Offline POS	âŒ	âœ…
Custom domain	âŒ	âœ…
BÃ¡o cÃ¡o Excel	âŒ	âœ…
HÄÄT	Add-on	Add-on
2.3 Check plan trong React
export function hasFeature(plan: string, feature: string) {
  const features = {
    free: [],
    pro: ["offline", "custom_domain", "reports"],
  };
  return features[plan]?.includes(feature);
}


ğŸ‘‰ áº¨n UI, khÃ´ng disable

2.4 Check plan trong Edge Function
if (subscription.plan !== "pro") {
  return new Response("Upgrade required", { status: 403 });
}


ğŸ“Œ KhÃ´ng tin frontend

2.5 Thanh toÃ¡n (lÃ m sau váº«n Ä‘Æ°á»£c)

VNPay / Momo / Stripe

Chá»‰ cáº§n update subscriptions.plan

ğŸ‘‰ KhÃ´ng Ä‘á»•i kiáº¿n trÃºc

3ï¸âƒ£ MULTI-ENVIRONMENT (DEV / STAGING / PROD)
ğŸ¯ VÃ¬ sao báº¯t buá»™c khi SaaS lá»›n?

Test tÃ­nh nÄƒng má»›i

KhÃ´ng lÃ m sáº­p khÃ¡ch Ä‘ang dÃ¹ng

Deploy an toÃ n

3.1 MÃ´i trÆ°á»ng chuáº©n
Env	Domain	DB
dev	dev.storelypos.com	Supabase Dev
staging	staging.storelypos.com	Supabase Staging
prod	*.storelypos.com	Supabase Prod
3.2 Supabase project riÃªng

storely-dev

storely-staging

storely-prod

ğŸ‘‰ KHÃ”NG dÃ¹ng chung DB

3.3 Vercel env vars
VITE_SUPABASE_URL
VITE_SUPABASE_ANON_KEY


Set theo:

Development

Preview

Production

3.4 Quy táº¯c sá»‘ng cÃ²n

âŒ KhÃ´ng test trÃªn prod
âŒ KhÃ´ng migrate DB trá»±c tiáº¿p
âœ… Test staging â†’ má»›i lÃªn prod

ğŸ” Tá»”NG Há»¢P KIáº¾N TRÃšC CUá»I
Domain
   â†“
Brand Resolver
   â†“
Auth + JWT (brand_id)
   â†“
RLS
   â†“
Billing check
   â†“
Feature access


âœ” KhÃ´ng lá»™ dá»¯ liá»‡u
âœ” KhÃ´ng dÃ¹ng sai domain
âœ” KhÃ´ng phÃ¡ khÃ¡ch cÅ©

âœ… CHECKLIST SAU CÃ™NG

 Subdomain theo brand

 Custom domain cÃ³ verify

 Billing theo brand

 Feature gating

 Dev / Staging / Prod tÃ¡ch biá»‡t

ğŸ‘‰ ÄÃ¢y lÃ  kiáº¿n trÃºc SaaS chuáº©n quá»‘c táº¿.

ğŸ¯ Káº¾T LUáº¬N THáº²NG

Anh Ä‘ang xÃ¢y SaaS POS Ä‘Ãºng bÃ i, khÃ´ng pháº£i app há»c táº­p:

Kiáº¿n trÃºc bá»n

BÃ¡n Ä‘Æ°á»£c

Scale Ä‘Æ°á»£c

KhÃ´ng ná»£ ká»¹ thuáº­t

Náº¿u anh muá»‘n, bÆ°á»›c tiáº¿p theo mÃ¬nh cÃ³ thá»ƒ lÃ m:

1ï¸âƒ£ Flow thanh toÃ¡n VNPay/Momo chi tiáº¿t
2ï¸âƒ£ Checklist go-live cho 100+ brand
3ï¸âƒ£ Security audit checklist cho Supabase

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh tiáº¿p tá»¥c cÃ¹ng anh ğŸš€

Cáº£ 3

Ráº¥t tá»‘t ğŸ‘
â€œCáº£ 3â€ nÃ y lÃ  bá»™ cuá»‘i cÃ¹ng Ä‘á»ƒ Storely POS THU TIá»€N THáº¬T â€“ CHáº Y á»”N â€“ KHÃ”NG Bá»Š Sáº¬P khi cÃ³ nhiá»u khÃ¡ch.
MÃ¬nh sáº½ trÃ¬nh bÃ y rÃµ â€“ thá»±c táº¿ â€“ Ä‘Ãºng Viá»‡t Nam, khÃ´ng mÃ u mÃ¨.

ğŸ§  Tá»”NG QUAN 3 PHáº¦N CUá»I
#	Pháº§n	Ã nghÄ©a
1ï¸âƒ£	Thanh toÃ¡n VNPay / MoMo	Thu tiá»n SaaS
2ï¸âƒ£	Go-Live Checklist (100+ brand)	KhÃ´ng sáº­p khi má»Ÿ rá»™ng
3ï¸âƒ£	Security Audit Supabase	KhÃ´ng lá»™ dá»¯ liá»‡u
1ï¸âƒ£ FLOW THANH TOÃN SAAS (VNPAY / MOMO)

âš ï¸ ÄÃ¢y lÃ  thanh toÃ¡n TIá»€N PHáº¦N Má»€M, KHÃ”NG pháº£i thanh toÃ¡n Ä‘Æ¡n bÃ¡n cá»§a cá»­a hÃ ng.

1.1 MÃ´ hÃ¬nh thanh toÃ¡n Ä‘Ãºng cho SaaS VN

ğŸ‘‰ Thanh toÃ¡n theo BRAND, khÃ´ng theo user.

Brand A
 â”œâ”€ 3 chi nhÃ¡nh
 â”œâ”€ 10 user
 â””â”€ 1 gÃ³i PRO / thÃ¡ng

1.2 Báº£ng billing
create table billing_invoices (
  id uuid primary key default gen_random_uuid(),
  brand_id uuid,
  amount numeric,
  provider text, -- vnpay / momo
  status text,   -- pending / paid / failed
  created_at timestamp default now()
);

1.3 Flow VNPay (chuáº©n VN)
Owner â†’ NÃ¢ng cáº¥p gÃ³i
   â†“
Táº¡o billing_invoice (pending)
   â†“
Redirect sang VNPay
   â†“
VNPay callback
   â†“
Verify chá»¯ kÃ½
   â†“
Update subscription = PRO

1.4 Edge Function xá»­ lÃ½ callback (VNPay)
if (verifyVnpaySignature(query)) {
  await supabase
    .from("subscriptions")
    .update({ plan: "pro" })
    .eq("brand_id", brand_id);
}


ğŸ“Œ Quan trá»ng

Verify chá»¯ kÃ½ Báº®T BUá»˜C

KhÃ´ng tin query frontend

1.5 MoMo (tÆ°Æ¡ng tá»±)

DÃ¹ng Webhook

Verify HMAC

Update subscription

ğŸ‘‰ Ká»¹ thuáº­t giá»‘ng nhau, chá»‰ khÃ¡c API

1.6 UX nÃªn lÃ m (ráº¥t VN)

Thanh toÃ¡n:

Chuyá»ƒn khoáº£n

VNPay

MoMo

GÃ³i:

1 thÃ¡ng

6 thÃ¡ng (giáº£m giÃ¡)

12 thÃ¡ng (giáº£m nhiá»u)

2ï¸âƒ£ GO-LIVE CHECKLIST (100+ BRAND)

ÄÃ¢y lÃ  thá»© quyáº¿t Ä‘á»‹nh sá»‘ng/cháº¿t khi má»Ÿ rá»™ng.

2.1 TrÆ°á»›c khi má»Ÿ cho khÃ¡ch (Báº®T BUá»˜C)
Háº¡ táº§ng

 Supabase PRO

 Backup DB háº±ng ngÃ y

 Point-in-time recovery báº­t

 Vercel Production domain OK

Dá»¯ liá»‡u

 RLS báº­t táº¥t cáº£ báº£ng

 KhÃ´ng cÃ³ báº£ng public open

 KhÃ´ng user nÃ o thiáº¿u brand_id

POS

 Offline test 1â€“2 tiáº¿ng

 Sync láº¡i khÃ´ng trÃ¹ng

 Ã‚m tá»“n cÃ³ cáº£nh bÃ¡o

2.2 Khi Ä‘áº¡t 20â€“30 brand

 Dashboard theo dÃµi offline

 Alert lá»—i sync

 Alert Ã¢m tá»“n

 CÃ³ log Edge Function

2.3 Khi Ä‘áº¡t 100+ brand

 Supabase rate limit review

 TÃ¡ch Supabase project staging

 KhÃ´ng deploy trá»±c tiáº¿p prod

 CÃ³ quy trÃ¬nh rollback

2.4 Dáº¥u hiá»‡u Sáº®P Sáº¬P (pháº£i xá»­ lÃ½ ngay)
Dáº¥u hiá»‡u	LÃ m gÃ¬
Sync cháº­m	Tá»‘i Æ°u Edge Function
Kho lá»‡ch	Check inventory_logs
Login cháº­m	Index auth + profile
Build fail	Freeze deploy
3ï¸âƒ£ SECURITY AUDIT CHECKLIST (SUPABASE)

RLS Ä‘Ãºng nhÆ°ng chÆ°a Ä‘á»§ â€“ pháº§n nÃ y ráº¥t quan trá»ng.

3.1 Nhá»¯ng thá»© TUYá»†T Äá»I KHÃ”NG ÄÆ¯á»¢C Lá»˜

âŒ SUPABASE_SERVICE_ROLE_KEY
âŒ Edge Function secrets
âŒ Billing secrets (VNPay / MoMo)

ğŸ‘‰ Chá»‰ Edge Function Ä‘Æ°á»£c dÃ¹ng

3.2 Kiá»ƒm tra RLS (Báº®T BUá»˜C)

Cháº¡y cÃ¡c cÃ¢u test:

select * from orders;


ğŸ‘‰ Náº¿u user thÆ°á»ng cháº¡y Ä‘Æ°á»£c â†’ âŒ SAI

3.3 NguyÃªn táº¯c RLS CHUáº¨N
USING (
  brand_id = current_setting('request.jwt.claim.brand_id')::uuid
)


ğŸ‘‰ KhÃ´ng join Ä‘á»ƒ kiá»ƒm tra quyá»n

3.4 Audit log (ráº¥t nÃªn cÃ³)
audit_logs (
  brand_id,
  user_id,
  action,
  entity,
  created_at
)


Log khi:

Login

Sync offline

Äiá»u chá»‰nh tá»“n

NÃ¢ng cáº¥p gÃ³i

3.5 Kiá»ƒm tra Ä‘á»‹nh ká»³ (má»—i thÃ¡ng)

 Rotate secrets

 Check logs Edge Function

 Review RLS policies

 Review domain verification

ğŸ¯ Tá»”NG Káº¾T CUá»I CÃ™NG (NÃ“I THáº²NG)

Sau Cáº¢ 3 PHáº¦N NÃ€Y, Storely POS cá»§a anh:

âœ… Thu tiá»n SaaS Ä‘Æ°á»£c
âœ… KhÃ´ng sáº­p khi cÃ³ nhiá»u khÃ¡ch
âœ… KhÃ´ng lá»™ dá»¯ liá»‡u brand
âœ… Äá»§ chuáº©n bÃ¡n cho doanh nghiá»‡p VN

ğŸ‘‰ ÄÃ¢y lÃ  level SaaS thÆ°Æ¡ng máº¡i tháº­t, khÃ´ng pháº£i project cÃ¡ nhÃ¢n.

ğŸš€ BÆ¯á»šC TIáº¾P THEO (ANH CHá»ŒN)

Náº¿u anh muá»‘n, mÃ¬nh cÃ³ thá»ƒ lÃ m tiáº¿p:

1ï¸âƒ£ Viáº¿t code máº«u VNPay / MoMo chi tiáº¿t (Edge Function)
2ï¸âƒ£ Monitoring + alert (Sentry / Supabase logs)
3ï¸âƒ£ Ká»‹ch báº£n xá»­ lÃ½ sá»± cá»‘ production (POS bá»‹ lá»—i)

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh Ä‘i tiáº¿p Ä‘áº¿n má»©c váº­n hÃ nh doanh nghiá»‡p SaaS ğŸš€

Cáº£ 3

Tuyá»‡t ğŸ‘
Váº­y mÃ¬nh sáº½ lÃ m TRá»ŒN Bá»˜ Cáº¢ 3 PHáº¦N CUá»I á» Má»¨C â€œVáº¬N HÃ€NH DOANH NGHIá»†P SAASâ€ cho Storely POS, Ä‘Ãºng Supabase + React + Vercel, Ã¡p dá»¥ng thá»±c táº¿ táº¡i Viá»‡t Nam.

MÃ¬nh chia rÃµ rÃ ng Ä‘á»ƒ anh triá»ƒn khai theo checklist, khÃ´ng bá»‹ rá»‘i.

ğŸ§  Tá»”NG QUAN 3 PHáº¦N CUá»I
#	Pháº§n	Má»¥c tiÃªu
1ï¸âƒ£	Code máº«u VNPay / MoMo	Thu tiá»n SaaS tháº­t
2ï¸âƒ£	Monitoring + Alert	Biáº¿t lá»—i trÆ°á»›c khi khÃ¡ch gá»i
3ï¸âƒ£	Ká»‹ch báº£n xá»­ lÃ½ sá»± cá»‘ POS	CSKH xá»­ lÃ½ nhanh â€“ khÃ´ng loáº¡n
1ï¸âƒ£ CODE MáºªU THANH TOÃN SAAS (VNPAY / MOMO)

âš ï¸ Thanh toÃ¡n PHÃ PHáº¦N Má»€M, khÃ´ng pháº£i tiá»n bÃ¡n hÃ ng cá»§a cá»­a hÃ ng.

1.1 Flow chuáº©n SaaS táº¡i VN
Owner â†’ NÃ¢ng cáº¥p gÃ³i
   â†“
Táº¡o billing_invoice (pending)
   â†“
Redirect VNPay / MoMo
   â†“
Callback / Webhook
   â†“
Verify chá»¯ kÃ½
   â†“
Update subscription (PRO)

1.2 Báº£ng dá»¯ liá»‡u billing
create table subscriptions (
  brand_id uuid primary key,
  plan text check (plan in ('free','pro')),
  started_at timestamp,
  expires_at timestamp
);

create table billing_invoices (
  id uuid primary key default gen_random_uuid(),
  brand_id uuid,
  amount numeric,
  provider text,
  status text, -- pending / paid / failed
  created_at timestamp default now()
);

1.3 Edge Function â€“ táº¡o link VNPay
// functions/create-vnpay-payment.ts
const params = {
  vnp_Amount: amount * 100,
  vnp_TxnRef: invoice_id,
  vnp_ReturnUrl: RETURN_URL,
};

const paymentUrl = buildVnpayUrl(params);
return { paymentUrl };


ğŸ‘‰ Redirect user sang VNPay

1.4 Edge Function â€“ callback VNPay
// functions/vnpay-callback.ts
if (!verifySignature(query)) {
  return error;
}

await supabase
  .from("subscriptions")
  .update({ plan: "pro" })
  .eq("brand_id", brand_id);

await supabase
  .from("billing_invoices")
  .update({ status: "paid" })
  .eq("id", invoice_id);


ğŸ“Œ KhÃ´ng verify chá»¯ kÃ½ = FAIL

1.5 MoMo (tÆ°Æ¡ng tá»±)

Webhook

Verify HMAC

Update subscription

ğŸ‘‰ Logic y há»‡t VNPay

2ï¸âƒ£ MONITORING + ALERT (PHáº¢I CÃ“)

Khi cÃ³ 20+ brand â†’ khÃ´ng thá»ƒ debug thá»§ cÃ´ng

2.1 Nhá»¯ng thá»© PHáº¢I monitor
Edge Function

sync-order

create-vnpay-payment

invoice callbacks

POS

Offline quÃ¡ lÃ¢u

Unsynced orders > 0

2.2 Log chuáº©n trong Edge Function
console.log({
  brand_id,
  branch_id,
  action: "sync-order",
  status: "success",
});


ğŸ‘‰ Xem trong Supabase â†’ Logs

2.3 Gá»£i Ã½ alert (thá»±c táº¿)
Äiá»u kiá»‡n	Alert
Sync lá»—i > 5 láº§n	âš ï¸
Unsynced orders > 10	ğŸš¨
Ã‚m tá»“n > 3 SP	âš ï¸
Login fail nhiá»u	ğŸš¨
2.4 Sentry (Frontend)
Sentry.init({
  dsn: "...",
});


ğŸ‘‰ Biáº¿t lá»—i JS trÆ°á»›c khi khÃ¡ch bÃ¡o.

3ï¸âƒ£ Ká»ŠCH Báº¢N Xá»¬ LÃ Sá»° Cá» POS (CSKH / CTV)

ÄÃ¢y lÃ  thá»© giÃºp anh khÃ´ng bá»‹ quÃ¡ táº£i support

3.1 Sá»± cá»‘: âŒ Máº¤T Máº NG
NÃ“I Vá»šI KHÃCH

â€œAnh/chá»‹ cá»© bÃ¡n bÃ¬nh thÆ°á»ng, cÃ³ máº¡ng lÃ  há»‡ thá»‘ng tá»± cáº­p nháº­t.â€

HÃ€NH Äá»˜NG

Kiá»ƒm tra badge Offline

Äá»ƒ POS cháº¡y offline

3.2 Sá»± cá»‘: âŒ KHÃ”NG IN ÄÆ¯á»¢C BILL
CHECK NHANH

MÃ¡y in cÃ³ Ä‘iá»‡n?

Chá»n Ä‘Ãºng mÃ¡y?

Cáº¯m USB / LAN?

NÃ“I

â€œKhÃ´ng sao, bÃ¡n tiáº¿p Ä‘Æ°á»£c, in láº¡i sau.â€

3.3 Sá»± cá»‘: âŒ SAI Tá»’N KHO
NGUYÃŠN NHÃ‚N

BÃ¡n offline

Nháº­p thiáº¿u

CÃCH Xá»¬ LÃ

Phiáº¿u Ä‘iá»u chá»‰nh tá»“n

CÃ³ lÃ½ do + log

3.4 Sá»± cá»‘: âŒ KHÃ”NG ÄÄ‚NG NHáº¬P ÄÆ¯á»¢C
CHECK

ÄÃºng subdomain chÆ°a?

ÄÃºng brand chÆ°a?

ğŸ‘‰ 90% lá»—i do vÃ o sai domain

3.5 Sá»± cá»‘: âŒ THANH TOÃN SAAS KHÃ”NG Cáº¬P NHáº¬T
CHECK

Webhook cÃ³ gá»i khÃ´ng?

Billing_invoice status?

ğŸ‘‰ Fix báº±ng cÃ¡ch re-run callback

âœ… CHECKLIST CUá»I (Báº®T BUá»˜C)

 VNPay / MoMo callback verify

 Subscription update server-side

 Offline POS khÃ´ng cháº·n bÃ¡n

 Unsynced order dashboard

 Edge Function logs

 CSKH cÃ³ ká»‹ch báº£n xá»­ lÃ½

ğŸ¯ Káº¾T LUáº¬N CUá»I (Ráº¤T THáº¬T)

Sau Cáº¢ 3 PHáº¦N NÃ€Y, Storely POS:

ğŸ’° Thu tiá»n SaaS á»•n Ä‘á»‹nh

ğŸ› ï¸ KhÃ´ng sáº­p khi nhiá»u khÃ¡ch

ğŸ” KhÃ´ng lá»™ dá»¯ liá»‡u

ğŸ§‘â€ğŸ’¼ CSKH xá»­ lÃ½ Ä‘Æ°á»£c má»i tÃ¬nh huá»‘ng

ğŸš€ Sáºµn sÃ ng scale 100+ brand

ğŸ‘‰ ÄÃ¢y lÃ  level SaaS doanh nghiá»‡p thá»±c thá»¥.

ğŸš€ BÆ¯á»šC TIáº¾P THEO (ANH CHá»ŒN)

MÃ¬nh cÃ³ thá»ƒ lÃ m tiáº¿p:

1ï¸âƒ£ Chuáº©n bá»‹ tÃ i liá»‡u bÃ¡n hÃ ng cho CTV / Ä‘áº¡i lÃ½
2ï¸âƒ£ Checklist chuyá»ƒn Supabase Free â†’ Pro an toÃ n
3ï¸âƒ£ Ká»‹ch báº£n gá»i vá»‘n / pitch deck ká»¹ thuáº­t

ğŸ‘‰ Tráº£ lá»i 1 / 2 / 3 / cáº£ 3, mÃ¬nh sáº½ tiáº¿p tá»¥c Ä‘á»“ng hÃ nh.

1,2

Tuyá»‡t ğŸ‘
Anh chá»n 1 & 2 lÃ  Ä‘Ãºng thá»© tá»± Ä‘á»ƒ BÃN ÄÆ¯á»¢C vÃ  KHÃ”NG CHáº¾T Ká»¸ THUáº¬T.

MÃ¬nh sáº½ lÃ m Ráº¤T THá»°C Táº¾, dÃ¹ng Ä‘Æ°á»£c ngay cho Storely POS, khÃ´ng lÃ½ thuyáº¿t.

PHáº¦N 1ï¸âƒ£ â€“ TÃ€I LIá»†U BÃN HÃ€NG CHO CTV / Äáº I LÃ (DÃ™NG NGUYÃŠN VÄ‚N)
ğŸ¯ Má»¥c tiÃªu tÃ i liá»‡u nÃ y

CTV khÃ´ng cáº§n hiá»ƒu ká»¹ thuáº­t

Chá»‰ cáº§n:

Demo 5 phÃºt

Chá»‘t Ä‘Æ°á»£c

Gá»­i khÃ¡ch cho anh cÃ i

1.1 CÃ¡ch CTV giá»›i thiá»‡u (30 GIÃ‚Y Äáº¦U)

CTV nÃ³i NGUYÃŠN VÄ‚N:

â€œEm cÃ³ pháº§n má»m bÃ¡n hÃ ng cho táº¡p hÃ³a / quÃ¡n Äƒn,
máº¥t máº¡ng váº«n bÃ¡n Ä‘Æ°á»£c, bÃ¡n ráº¥t nhanh,
giÃ¡ chá»‰ tá»« 99.000Ä‘/thÃ¡ng.â€

âŒ KhÃ´ng nÃ³i:

SaaS

Cloud

Supabase

Multi-tenant

1.2 Demo chuáº©n 5 PHÃšT (KHÃ”NG ÄÆ¯á»¢C SÃNG Táº O)
PhÃºt 1â€“2: BÃN HÃ€NG

QuÃ©t mÃ£ / báº¥m sáº£n pháº©m

Báº¥m THANH TOÃN

In bill

CTV nÃ³i:

â€œBÃ¡n xong lÃ  in bill liá»n, khÃ´ng cáº§n chá».â€

PhÃºt 3: Máº¤T Máº NG

Táº¯t WiFi

BÃ¡n tiáº¿p

In bill

CTV nÃ³i:

â€œMáº¥t máº¡ng váº«n bÃ¡n bÃ¬nh thÆ°á»ng.â€

ğŸ‘‰ ÄÃ¢y lÃ  Ä‘Ã²n chá»‘t

PhÃºt 4: Tá»’N KHO

Chá»‰ cho xem:

CÃ²n

Háº¿t

Sáº¯p háº¿t

CTV nÃ³i:

â€œBÃ¡n lÃ  tá»± trá»« kho, khÃ´ng cáº§n ghi sá»•.â€

PhÃºt 5: GIÃ

CTV nÃ³i:

â€œAnh/chá»‹ dÃ¹ng thá»­, há»£p thÃ¬ dÃ¹ng, khÃ´ng há»£p em xoÃ¡ cho.â€

âŒ KhÃ´ng Ã©p
âŒ KhÃ´ng giáº£i thÃ­ch thÃªm

1.3 CÃ¢u CHá»T SALE (Ráº¤T QUAN TRá»ŒNG)

CTV chá»‰ nÃ³i 1 cÃ¢u:

â€œEm cÃ i cho anh/chá»‹ dÃ¹ng thá»­ tá»‘i nay,
mai bÃ¡n quen lÃ  khÃ´ng bá» Ä‘Æ°á»£c.â€

ğŸ‘‰ Tá»· lá»‡ chá»‘t ráº¥t cao

1.4 Hoa há»“ng khuyáº¿n nghá»‹
Kiá»ƒu	Hoa há»“ng
GÃ³i thÃ¡ng	30%
GÃ³i 6â€“12 thÃ¡ng	40%
Gia háº¡n	10â€“15%

ğŸ“Œ Tráº£ hoa há»“ng trong 7 ngÃ y â†’ CTV má»›i gáº¯n bÃ³.

1.5 Quy trÃ¬nh lÃ m viá»‡c vá»›i CTV
CTV chá»‘t
   â†“
Gá»­i thÃ´ng tin khÃ¡ch
   â†“
Anh cÃ i Storely POS
   â†“
CTV nháº­n hoa há»“ng


ğŸ‘‰ CTV KHÃ”NG cáº§n login há»‡ thá»‘ng admin

PHáº¦N 2ï¸âƒ£ â€“ CHECKLIST CHUYá»‚N SUPABASE FREE â†’ PRO (AN TOÃ€N)
ğŸ¯ Khi nÃ o PHáº¢I nÃ¢ng Pro?

ğŸ‘‰ Tá»« 20â€“30 brand trá»Ÿ lÃªn

2.1 TRÆ¯á»šC KHI NÃ‚NG (Báº®T BUá»˜C)
Kiá»ƒm tra dá»¯ liá»‡u

 Táº¥t cáº£ báº£ng cÃ³ brand_id

 RLS báº­t toÃ n bá»™

 KhÃ´ng báº£ng nÃ o public open

Cháº¡y test:

select * from orders;


ğŸ‘‰ Náº¿u user thÆ°á»ng cháº¡y Ä‘Æ°á»£c â†’ âŒ CHÆ¯A ÄÆ¯á»¢C NÃ‚NG

2.2 NÃ‚NG SUPABASE PRO

Trong Supabase Dashboard:

Upgrade Project â†’ Pro

ğŸ“Œ Lá»£i Ã­ch:

Backup hÃ ng ngÃ y

PITR (khÃ´i phá»¥c theo thá»i Ä‘iá»ƒm)

Logs Ä‘áº§y Ä‘á»§

Rate limit cao hÆ¡n

2.3 SAU KHI NÃ‚NG (Báº®T BUá»˜C)
Báº­t Backup

Daily backup: ON

Retention: â‰¥ 7 ngÃ y

Báº­t PITR

KhÃ´i phá»¥c theo phÃºt (ráº¥t quan trá»ng)

2.4 TÃCH ENV (KHÃ”NG DÃ™NG CHUNG)
Env	Supabase
dev	storely-dev
staging	storely-staging
prod	storely-prod

âŒ KhÃ´ng test trÃªn prod
âŒ KhÃ´ng migrate trá»±c tiáº¿p prod

2.5 Rotate secrets (Ráº¤T QUAN TRá»ŒNG)

Äá»•i:

SERVICE_ROLE_KEY

JWT_SECRET

Update láº¡i Edge Functions

ğŸ‘‰ Báº¯t buá»™c khi lÃªn Pro

2.6 Kiá»ƒm tra sau nÃ¢ng

 Login OK

 POS offline sync OK

 KhÃ´ng lá»—i RLS

 Edge Function cháº¡y bÃ¬nh thÆ°á»ng

CHECKLIST CHá»T (ANH IN RA DÃ™NG)
BÃ¡n hÃ ng

 CTV demo Ä‘Ãºng ká»‹ch báº£n

 KhÃ´ng nÃ³i ká»¹ thuáº­t

 Chá»‘t trong 5 phÃºt

Ká»¹ thuáº­t

 RLS Ä‘á»§

 Backup báº­t

 KhÃ´ng test prod

Káº¾T LUáº¬N THáº²NG

Anh Ä‘ang á»Ÿ Ä‘Ãºng thá»i Ä‘iá»ƒm â€œchuyá»ƒn tá»« code sang bÃ¡nâ€.

Pháº§n má»m: âœ… Ä‘á»§ máº¡nh

Kiáº¿n trÃºc: âœ… Ä‘Ãºng

BÆ°á»›c tiáº¿p theo: bÃ¡n & giá»¯ khÃ¡ch

Hai thá»© anh vá»«a chá»n (1 & 2) chÃ­nh lÃ :

CÃCH Sá»NG Cá»¦A SAAS POS Táº I VIá»†T NAM

ğŸ”¥ BÆ¯á»šC TIáº¾P THEO (ANH CHá»ŒN)

MÃ¬nh cÃ³ thá»ƒ lÃ m tiáº¿p:

3ï¸âƒ£ Checklist giá»¯ khÃ¡ch 30â€“60â€“90 ngÃ y
4ï¸âƒ£ Playbook má»Ÿ rá»™ng tá»« 10 â†’ 100 â†’ 500 cá»­a hÃ ng

ğŸ‘‰ Anh chá»‰ cáº§n nÃ³i 3, 4, hoáº·c cáº£ 3 & 4
MÃ¬nh Ä‘i tiáº¿p tá»›i má»©c váº­n hÃ nh quy mÃ´ lá»›n ğŸš€